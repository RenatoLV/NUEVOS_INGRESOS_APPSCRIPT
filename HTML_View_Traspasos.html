<div id="vista-traspasos" class="vista-contenido">
  <h2>
    <i class="fas fa-exchange-alt"></i> Módulo de Traspasos
  </h2>
  <p>Gestiona el movimiento de personal a Nóminas o Contratos.</p>
  
  <ul class="nav nav-tabs mt-4">
    <li class="nav-item">
      <a class="nav-link active" data-toggle="tab" href="#panel-contratos" id="tab-contratos">
        <i class="fas fa-file-signature fa-fw mr-2"></i>Pendientes para Contratos </a>
    </li>
    <li class="nav-item">
      <a class="nav-link" data-toggle="tab" href="#panel-nomina" id="tab-nomina">
        <i class="fas fa-users-cog fa-fw mr-2"></i>Pendientes para Nómina </a>
    </li>
    <!-- PESTAÑA MONITOR DE AVANCE -->
    <li class="nav-item">
      <a class="nav-link" data-toggle="tab" href="#panel-avance" id="tab-avance">
        <i class="fas fa-tasks fa-fw mr-2"></i>Monitor de Avance </a>
    </li>
  </ul>
  
  <div class="tab-content border border-top-0 p-3 mb-3 bg-white shadow-sm rounded-bottom">
    
    <!-- PANEL CONTRATOS -->
    <div class="tab-pane fade show active" id="panel-contratos">
      <div class="bg-light p-3 rounded mb-3 border">
        <div class="form-row">
          <div class="col-md-4">
            <label class="small text-muted font-weight-bold mb-1">BUSCAR (NOMBRE / RUT)</label>
            <div class="input-group input-group-sm">
                <div class="input-group-prepend"><span class="input-group-text"><i class="fas fa-search"></i></span></div>
                <input type="text" class="form-control" id="filtro-texto-contratos" placeholder="Escriba para filtrar...">
            </div>
          </div>
          <div class="col-md-4">
            <label class="small text-muted font-weight-bold mb-1">CALIDAD CONTRACTUAL</label>
            <select class="form-control form-control-sm" id="filtro-calidad-contratos"><option value="">TODAS</option></select>
          </div>
          <div class="col-md-4">
            <label class="small text-muted font-weight-bold mb-1">ASIGNADO A</label>
            <select class="form-control form-control-sm" id="filtro-asignado-contratos"><option value="">TODOS</option></select>
          </div>
        </div>
      </div>
      <div id="lista-traspaso-contratos"></div>
      <div id="acciones-traspaso-contratos" class="mt-3 text-right"></div>
    </div>

    <!-- PANEL NÓMINA -->
    <div class="tab-pane fade" id="panel-nomina">
      <div class="bg-light p-3 rounded mb-3 border">
        <div class="form-row">
          <div class="col-md-4">
            <label class="small text-muted font-weight-bold mb-1">BUSCAR (NOMBRE / RUT)</label>
            <div class="input-group input-group-sm">
                <div class="input-group-prepend"><span class="input-group-text"><i class="fas fa-search"></i></span></div>
                <input type="text" class="form-control" id="filtro-texto-nomina" placeholder="Escriba para filtrar...">
            </div>
          </div>
          <div class="col-md-4">
            <label class="small text-muted font-weight-bold mb-1">CALIDAD CONTRACTUAL</label>
            <select class="form-control form-control-sm" id="filtro-calidad-nomina"><option value="">TODAS</option></select>
          </div>
          <div class="col-md-4">
            <label class="small text-muted font-weight-bold mb-1">ASIGNADO A</label>
            <select class="form-control form-control-sm" id="filtro-asignado-nomina"><option value="">TODOS</option></select>
          </div>
        </div>
      </div>
      <div id="lista-traspaso-nomina"></div>
      <div id="acciones-traspaso-nomina" class="mt-3 text-right"></div>
    </div>

    <!-- PANEL: MONITOR DE AVANCE -->
    <div class="tab-pane fade" id="panel-avance">
        <div class="d-flex justify-content-between align-items-center mb-3">
            <h5 class="text-secondary"><i class="fas fa-binoculars"></i> Estado Global de Ingresos Pendientes</h5>
            <button class="btn btn-sm btn-outline-primary" onclick="App.methods.traspaso.cargarMonitorAvance()">
                <i class="fas fa-sync"></i> Refrescar
            </button>
        </div>
        
        <!-- NUEVO: FILTRO PARA MONITOR -->
        <div class="bg-light p-3 rounded mb-3 border">
            <div class="form-row align-items-center">
                <div class="col-md-5">
                    <label class="small text-muted font-weight-bold mb-1">FILTRAR POR CALIDAD CONTRACTUAL</label>
                    <select class="form-control form-control-sm" id="filtro-calidad-avance" onchange="App.methods.traspaso.filtrarMonitorAvance()">
                        <option value="">TODAS</option>
                    </select>
                </div>
                 <div class="col-md-7">
                    <div class="alert alert-info text-small mb-0 py-2">
                        <i class="fas fa-info-circle"></i> Se muestran funcionarios que <b>no han completado el ciclo</b>.
                    </div>
                 </div>
            </div>
        </div>

        <div id="loader-avance" class="text-center py-3" style="display:none;">
            <div class="spinner-border text-primary" role="status"><span class="sr-only">Cargando...</span></div>
        </div>
        <div class="table-responsive">
            <table class="table table-hover table-striped" id="tabla-avance">
                <thead class="thead-dark">
                    <tr>
                        <th>ID</th>
                        <th>Nombre</th>
                        <th>Calidad</th>
                        <th>Estado Proceso</th>
                        <th>Estado Datos</th>
                        <th>Acción Faltante</th>
                    </tr>
                </thead>
                <tbody id="tbody-avance"></tbody>
            </table>
        </div>
    </div>

  </div>
</div>